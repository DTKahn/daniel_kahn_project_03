const zzz = {};

// Create a classmates object with
//// Name
//// Img (link to img)

// TEST LIST: 60s BATMAN
zzz.batman = [
    {
        name: 'Bruce Wayne',
        url: 'assets/batman/batman-sqr.jpg'
    },
    {
        name: 'Alfred Pennyworth',
        url: 'assets/batman/alfred-sqr.jpg'
    },
    {
        name: 'Dick Grayson',
        url: 'assets/batman/robin-sqr.jpg'
    },
    {
        name: 'Selina Kyle',
        url: 'assets/batman/catwoman-sqr.jpg'
    },
    {
        name: 'The Joker',
        url: 'assets/batman/joker-sqr.jpg'
    },
    {
        name: 'Edward Nigma',
        url: 'assets/batman/riddler-sqr.jpg'
    },
    {
        name: 'Oswald Chesterfield Cobblepot',
        url: 'assets/batman/penguin-sqr.jpg'
    },
    {
        name: 'Barbara Gordon',
        url: 'assets/batman/barbaraGordon.jpg'
    },
    {
        name: 'James Gordon',
        url: 'assets/batman/JamesGordon.jpg'
    },
    {
        name: 'William McElroy',
        url: 'assets/batman/williamMcElroy.jpg'
    },
    {
        name: 'Jervis Tetch',
        url: 'assets/batman/JervisTetch.jpg'
    }
];

zzz.hackerYouDogs = [
    {
        name: 'Dug',
        url: 'assets/hackerYouDogs/dog-dug.jpg'
    },
    {
        name: 'Junior',
        url: 'assets/hackerYouDogs/dog-junior.jpg'
    },
    {
        name: 'Kenzo',
        url: 'assets/hackerYouDogs/dog-kenzo.jpg'
    },
    {
        name: 'Mika',
        url: 'assets/hackerYouDogs/dog-mika.jpg'
    },
    {
        name: 'Porkie',
        url: 'assets/hackerYouDogs/dog-porkie.jpg'
    }
];

zzz.dogs = [
    {
        name: 'Dug',
        url: 'assets/hackerYouDogs/dog-dug.jpg'
    },
    {
        name: 'Junior',
        url: 'assets/hackerYouDogs/dog-junior.jpg'
    },
    {
        name: 'Kenzo',
        url: 'assets/hackerYouDogs/dog-kenzo.jpg'
    },
    {
        name: 'Mika',
        url: 'assets/hackerYouDogs/dog-mika.jpg'
    },
    {
        name: 'Porkie',
        url: 'assets/hackerYouDogs/dog-porkie.jpg'
    },
    {
        name:'Air Buddy',
        url: 'assets/dogs/air-buddy.jpg'
    },
    {
        name:'Beethoven',
        url: 'assets/dogs/beethoven.jpg'
    },
    {
        name:'Bo',
        url: 'assets/dogs/bo.jpg'
    },
    {
        name:'Chance',
        url: 'assets/dogs/chance.jpg'
    },
    {
        name:'Chloe',
        url: 'assets/dogs/chloe.jpg'
    },
    {
        name:'Eddie',
        url: 'assets/dogs/eddie.jpg'
    },
    {
        name:'Hooch',
        url: 'assets/dogs/hooch.jpg'
    },
    {
        name:'Laika',
        url: 'assets/dogs/laika.jpg'
    },
    {
        name:'Lassie',
        url: 'assets/dogs/lassie.jpg'
    },
    {
        name:'Marley',
        url: 'assets/dogs/marley.jpg'
    },
    {
        name:'Shadow',
        url: 'assets/dogs/shadow.jpg'
    },
    {
        name:'Sunny',
        url: 'assets/dogs/sunny.jpg'
    },
    {
        name:'Toto',
        url: 'assets/dogs/toto.jpg'
    },
    {
        name: 'Balto',
        url: 'assets/dogs/balto.jpg'
    },
    {
        name: 'Mr. Peanutbutter',
        url: 'assets/dogs/mrPeanutbutter.jpg'
    },
    {
        name: 'Seymour',
        url: 'assets/dogs/seymour.jpg'
    },
    {
        name: 'Poochie',
        url: 'assets/dogs/poochie.jpg'
    },
    {
        name: 'Jake',
        url: 'assets/dogs/jakeTheDog.jpg'
    },
    {
        name: 'Mr. Peabody',
        url: 'assets/dogs/mrPeabody.jpg'
    },
    {
        name: 'Snuffles A.K.A. Snowball',
        url: 'assets/dogs/snufflesAkaSnowball.jpg'
    },
    {
        name: 'Underdog',
        url: 'assets/dogs/underdog.jpg'
    },
    {
        name: 'Dogbert',
        url: 'assets/dogs/dogbert.jpg'
    },
    {
        name: 'Goofy',
        url: 'assets/dogs/goofy.jpg'
    },
    {
        name: 'Santa\'s Little Helper',
        url: 'assets/dogs/santasLittleHelper.jpg'
    },
    {
        name: 'Scooby',
        url: 'assets/dogs/scooby.jpg'
    },
    {
        name: 'Brian',
        url: 'assets/dogs/brian.jpg'
    },
    {
        name: 'Snoopy',
        url: 'assets/dogs/snoopy.jpg'
    },
    {
        name: 'Odie',
        url: 'assets/dogs/odie.jpg'
    },
    {
        name: 'Pluto',
        url: 'assets/dogs/pluto.jpg'
    },
    {
        name: 'Lady',
        url: 'assets/dogs/lady.jpg'
    },
    {
        name: 'Tramp',
        url: 'assets/dogs/tramp.jpg'
    },
    {
        name: 'Blue',
        url: 'assets/dogs/blue.jpg'
    },
    {
        name: 'Slinky',
        url: 'assets/dogs/slinky.jpg'
    },
    {
        name: 'Dug',
        url: 'assets/dogs/dug-up.jpg'
    }
];

zzz.hackerYouCohort19 = [
    {
        name: 'Ashley',
        url: 'assets/cohort-19/ashley-hellyer.jpg'
    },
    {
        name: 'Bahareh',
        url: 'assets/cohort-19/bahareh-adham.jpg'
    },
    {
        name: 'Ben',
        url: 'assets/cohort-19/ben-kelly.jpg'
    },
    {
        name: 'Bill',
        url: 'assets/cohort-19/billl-chuang.jpg'
    },
    {
        name: 'Christine',
        url: 'assets/cohort-19/christine-tan.jpg'
    },
    {
        name: 'Christopher',
        url: 'assets/cohort-19/christopher-arsenault.jpg'
    },
    {
        name: 'Cindy',
        url: 'assets/cohort-19/cindy-poon-yeung.jpg'
    },
    {
        name: 'Claire',
        url: 'assets/cohort-19/claire-ristow.jpg'
    },
    {
        name: 'Cynthia',
        url: 'assets/cohort-19/cynthia-chiu.jpg'
    },
    {
        name: 'Daniel',
        url: 'assets/cohort-19/daniel-kahn.jpg'
    },
    {
        name: 'David',
        url: 'assets/cohort-19/david-tran.jpg'
    },
    {
        name: 'Dianna',
        url: 'assets/cohort-19/dianna-lee.jpg'
    },
    {
        name: 'Erin',
        url: 'assets/cohort-19/erin-maaskant.jpg'
    },
    {
        name: 'Hugh',
        url: 'assets/cohort-19/hugh-rowland.jpg'
    },
    {
        name: 'James',
        url: 'assets/cohort-19/james-macdonald.jpg'
    },
    {
        name: 'Jeanylyn',
        url: 'assets/cohort-19/jeanylyn-lopez.jpg'
    },
    {
        name: 'Jeff',
        url: 'assets/cohort-19/jeff-lee.jpg'
    },
    {
        name: 'Jessica',
        url: 'assets/cohort-19/jessica-huynh.jpg'
    },
    {
        name: 'Jessica',
        url: 'assets/cohort-19/jessica-sea.jpg'
    },
    {
        name: 'Kandace',
        url: 'assets/cohort-19/kandace-obrien.jpg'
    },
    {
        name: 'Kera',
        url: 'assets/cohort-19/kera-johnson.jpg'
    },
    {
        name: 'Khoi',
        url: 'assets/cohort-19/khoi-pham.jpg'
    },
    {
        name: 'Laura',
        url: 'assets/cohort-19/laura-kirkham.jpg'
    },
    {
        name: 'Maggie',
        url: 'assets/cohort-19/maggie-deuitch.jpg'
    },
    {
        name: 'Moin',
        url: 'assets/cohort-19/moin-gani.jpg'
    },
    {
        name: 'Nicole',
        url: 'assets/cohort-19/nicole-salceda.jpg'
    },
    {
        name: 'Phil',
        url: 'assets/cohort-19/phil-bourassa.jpg'
    },
    {
        name: 'Pratik',
        url: 'assets/cohort-19/pratik-gauchan.jpg'
    },
    {
        name: 'Ricky',
        url: 'assets/cohort-19/ricky-law.jpg'
    },
    {
        name: 'Rita',
        url: 'assets/cohort-19/rita-solo.jpg'
    },
    {
        name: 'Rosalie',
        url: 'assets/cohort-19/rosalie-elphick.jpg'
    },
    {
        name: 'Scott',
        url: 'assets/cohort-19/scott-girouard.jpg'
    },
    {
        name: 'Shai',
        url: 'assets/cohort-19/shai-kirmani.jpg'
    },
    {
        name: 'Shangni',
        url: 'assets/cohort-19/shangni-hu.jpg'
    },
    {
        name: 'Spencer',
        url: 'assets/cohort-19/spencer-roberts.jpg'
    },
    {
        name: 'Stefan',
        url: 'assets/cohort-19/stefan-miranda.jpg'
    },
    {
        name: 'Susie',
        url: 'assets/cohort-19/susie-kim.jpg'
    },
    {
        name: 'Victoria',
        url: 'assets/cohort-19/victoria-chan.jpg'
    }
];

// test array with 9 numbers
zzz.array1 = [1, 2, 3, 4, 5, 6, 7, 8, 9];

// test array with 6 objects
zzz.array1withObjects = [
    {
        fruit: 'apple',
        stock: 32
    },
    {
        fruit: 'banana',
        stock: 7
    },
    {
        fruit: 'pear',
        stock: 10
    },
    {
        fruit: 'grape',
        stock: 200
    },
    {
        fruit: 'watermelon',
        stock: 6
    },
    {
        fruit: 'honeydew',
        stock: 14
    }
]

// test empty array
zzz.array2 = []

// Takes an array and returns a number corresponding to random index in that array
zzz.randomArrayIndex = function(array) {
    const randIndex = Math.floor(Math.random() * array.length);
    return randIndex;
};

zzz.timeRemaining = 5;

// We're leaving together, But still it's farewell, And maybe we'll come back, To earth, who can tell? I guess there is no one to blame. We're leaving ground (leaving ground). Will things ever be the same again?
zzz.countDown = function() {
    const count = setInterval(function () {
        
        zzz.timeRemaining--;
        
        $('.time-remaining-time').text(zzz.timeRemaining);

        if(zzz.timeRemaining === 0){
            clearInterval(count);
            
            $('.final-score').text(zzz.score);
            zzz.displayEndOfGame();
        };
    }, 1000);
};

// Removes a number of items from a target array
//// Takes args: 
////// removeFromArray, the array from which items are removed
////// addToArray, the array to which items are added
////// numberToRemove, the number of items to remove from the target array
zzz.arrayToArray = function (removeFromArray, addToArray, numberToRemove) {
    
    // run numberToRemove times
    for (i = 0; i < numberToRemove; i++) {
        
        // holds an array with length of 1
        //// .splice returns spliced elements as an array
        const removedValue = removeFromArray.splice(zzz.randomArrayIndex(removeFromArray), 1)
        
        // takes the first (only) item in the array removedValue and adds it to the array in arg addToArray
        addToArray.push(removedValue[0]);
    };
};

// Select array from list of array option

// Empty array of answer options which will be used to constuct buttons
//// Will be added to and called on by several functions
zzz.answerOptions = [];

// Empty array which will contain img and name of the subject
zzz.correctAnswer = [];

// The array used to play the game will be copied into this array
zzz.gameList = [];

zzz.chooseGameList = function(){
    
    $('.choose-game-list').on('submit', function(event){
        event.preventDefault();
       
        console.log('form submitted');

        const gameListValue = $('#game-list').find(":selected").val();

        console.log(gameListValue);

        zzz.setGameList(gameListValue);
        zzz.buildNew();
        zzz.buttonClick();
        
        // $('.start-of-game').toggleClass('hidden');
        $('.cover-game').toggleClass('hidden');
    });
    

};

// Stop classmates who have already been shown from showing again unless all have been shown
// Holds the objects that have already been answered
zzz.alreadyAnswered = [];

// Moves answer zzz.correctAnswer to zzz.alreadyAnswered
zzz.moveToAlreadyAnswered = function(){
    zzz.alreadyAnswered.push(zzz.correctAnswer.splice(0,1)[0]);
}

// Copy array to new array which will be modified during play
zzz.setGameList = function(subjectArray){

    console.log(subjectArray);
    
    zzz[subjectArray].forEach((item) => {
    // subjectArray.forEach((item) => {
        zzz.gameList.push(item);
    });
}

zzz.clearAnswerOptions = function(){
    zzz.answerOptions = [];
};

// Moves 1 object from the gameList to correctAnswer
zzz.setCorrectAnswer = function(){
    zzz.arrayToArray(zzz.gameList, zzz.correctAnswer, 1);
}

// Removes 3 objects from zzz.gameList and adds them to zzz.answerOptions
//// Using arrayToArray which leverages splice, rather than using slice so that we do not return the same wrong answer option more than once
//// Adds the wrong answer options to zzz.answerOptions
zzz.setWrongAnswerOptions = function(){
    
    // Wrong answer options built from a new array made up of zzz.gameList AND zzz.alreadyAnswered so that we always have the complete set of answers to draw on except for the correct answer

    const buildWrongAnswersFrom = []
    
    zzz.gameList.forEach(element => {
        buildWrongAnswersFrom.push(element)
    });

    zzz.alreadyAnswered.forEach(element => {
        buildWrongAnswersFrom.push(element)
    });

    const wrongAnswerOptions = []
    
    zzz.arrayToArray(buildWrongAnswersFrom, wrongAnswerOptions, 3);

    wrongAnswerOptions.forEach(element => {
        
        // Adds the wrong answer options to zzz.answerOptions
        zzz.answerOptions.push(element);
    });
}


zzz.addCorrectAnswerToAnswerOptions = function(){
    zzz.answerOptions.push(zzz.correctAnswer.slice(0)[0])
}

// Takes an array containing 1 object which has an img attribute and displays it under an object with the class "headshot"
zzz.showHeadshot = function(objectWithImgAttr) {

    // Sets variable $image to be the question image
    const $image = $('<img>').attr('src', objectWithImgAttr[0].url).attr('alt', `This is an image of the person who's name needs to be selected in one of the answer buttons.`);

    // Places the question image on the DOM under the element with the class "headshot"
    $('.headshot').append($image);
};

// Creates answer buttons from the list of answer options
zzz.buildAnswerButtons = function() {
    const shuffled = _.shuffle(zzz.answerOptions);
    
    shuffled.forEach(item => {
        
        const $button = `
                        <button class="answer-button">
                            <div class="answer-button-title">
                                <h3 class="top">Hello</h3>
                                <h3 class="bottom">my name is</h3>
                            </div>
                            <div class="button-content">${item.name}</div>
                        </button>
                        `;
        
        $('.answers').append($button);
    });
}

// Calls all the functions need to display the question
zzz.buildNew = function(){
    zzz.showScore();
    
    zzz.setCorrectAnswer();

    zzz.showHeadshot(zzz.correctAnswer);

    zzz.setWrongAnswerOptions();

    zzz.addCorrectAnswerToAnswerOptions();

    zzz.buildAnswerButtons();
}

// Checks if length of zzz.gameList is 0 and if it is, rebuilds it from  zzz.alreadyAnswered, clearing zzz.alreadyAnwered
zzz.rebuildGameList = function(){
    if(zzz.gameList.length === 0){
        zzz.gameList = zzz.alreadyAnswered;
        zzz.alreadyAnswered = [];
    };
};

// Resets the field for the next question
zzz.clearForNext = function(){
    zzz.clearAnswerOptions();
    zzz.moveToAlreadyAnswered();
    $('.headshot').empty();
    $('.answers').empty();
    zzz.rebuildGameList();

};

zzz.showScore = function(){
    $('.score').text(`Score: ${zzz.score}`);
};

// Keeps track of the number of submitted ansers
//// Used to start the timer
zzz.clickCount = 0;

// Take answer from button text and change score
zzz.buttonClick = function() {
    $('.answers').on('click', 'button', function() {
        
        
        const $answer = $(this).find('.button-content').text();
        
        // Change score
        if ($answer === zzz.correctAnswer[0].name){
            zzz.score++;
        }
        else {
            zzz.score--;
        };
        
        zzz.clearForNext();
        zzz.buildNew();
        if(zzz.clickCount === 0){
            zzz.countDown();
        };
        
        zzz.clickCount++;
    });    
}

// Keep track of score
//// +1 for every correct answer
//// -1 for every wrong answer
zzz.score = 0;

zzz.displayEndOfGame = function() {
    
    $('.cover-game').toggleClass('hidden');
    $('.hide-show-at-end').toggleClass('hidden');
}

// Reloads the page
zzz.startNewGame = function() {
    $('.new-game-button').on('click', function(){
        location.reload();
    });
}

// Limit play to 60 seconds
//// Show countdown? (number or bar?)

zzz.init = function() {
    console.log('And why doesnâ€™t Batman dance anymore? Remember the Batusi?');
    
    zzz.chooseGameList();
    
    // Sets the list we're using to play the game
    // zzz.setGameList(zzz.dogs);
    // zzz.buildNew();
    // zzz.buttonClick();
    
    // // Resets game
    zzz.startNewGame();

};

// Ready, M.D.
$(function () {
    
    zzz.init();

});
// ^End of Ready, M.D.